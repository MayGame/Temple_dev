<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temple</title>
</head>
<body>
    <div>Menu_bar:
        <button onclick="menu_tab('docs_ui_flow.html')">UI_flow</button>
        <button onclick="menu_tab('data_context_book1.html')">Data book1</button>
    </div>
    <div id="idiv"></div>
    <div>
        <h4>Talk to frame:</h4>
        <input type="text" name="" id="inp_send_m_to_frame">
        <button onclick="
        let v = inp_send_m_to_frame.value;
        console.log('sending',v);
        let f = window.frames.active_menu_frame;
        console.log(f);
        f.postMessage(v,'*');//fixme, when origin is known
        ">Send</button>
    </div>
    <h3>Temple:</h3>
    <h3>Other agents</h3>
    <div>
        <p></p>
        <br><label for=""></label><input type="text" name="" id="" placeholder="name">
        <br><label for=""></label><input type="text" name="" id="" placeholder="goals">
        <p></p>
        <!-- <br><label for=""></label><input type="text" name="" id="" placeholder="name"> -->
        <!-- <br><label for=""></label><input type="text" name="" id="" placeholder="name"> -->
        <br><button>Spawn Agent</button>
        <h4>List:</h4>
        <button onclick="load_agent_list()">Load</button>
        <div id="agents_list_div">
           
        </div>
    </div>
<h3>Task:</h3>
<h4>responsible: <input type="text" name="" id="" placeholder="id" disabled></h4>
<button>Delegate to</button><input type="text" name="" id="" placeholder="id">

    <script>
        
// source_context_type...
//useful for partial contexts
//agents and contexts can be complex or not, depending on the implementation.
var temple_agent={
    manifest:{

    },
    c:own_context,
    uf:function(c=temple_agent.c,agent=temple_agent){//unique to this agent
        var utility_max
        var unknowns=[]
        var plain_sum;
        var normalized_sum;
        c.important_vars.forEach(e => {
            c.per_variable_utility(e)
            // c.weights1[e]
        });
        return
    },
    per_variable_utility:function(var_name,agent=temple_agent){

    },
    var_utility_dict:{

    },
}
var own_context={
_type:'tmpwip',
weights1:{//ratio. gets normalized to distribute. total sum
    JStatusKnown_agent_is_happy:1000,

},
important_vars:['JStatusKnown_agent_is_happy',//another agent, works with the same context, has own weights. 
'JSafety','JHealth','Us','HumanityIsOk',

],


}
// var status_known_proxy_context=new Proxy()
var uf={//per variable...

}
function calc_utility_of_context_to_agent(context,agent){
    //there are multiple such functions.. each one has their own
    return
    agent.uf(context)
}
    </script>
    <script id="utils">
    window.addEventListener("message", pmsg, false);
var data_providers={
    //frames etc. Id, related data (type, url...)
}
    function pmsg(event){
        console.log("processing reply: \n",event.data);
    }
        function menu_tab(url){
            let f = document.createElement('iframe');
        f.src=url;
        f.name='active_menu_frame';
        let first = idiv.firstChild;
        if(first)
        idiv.removeChild(first);
        // else
        idiv.appendChild(f)

        }
        /* 
        find, secure, make safe, heal
        */
    
    </script>
</body>
</html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spiritual</title>
<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gun/sea.js"></script> 
<script src="https://cdn.jsdelivr.net/npm/gun/nts.js"></script>
</head>
<body>
    <!-- <p>In case I die</p> -->
    <button onclick="trigger_listener()">This!</button>
    <p>Params:</p>
    <label for="">delay</label><input type="number" name="delay_number"  placeholder="delay" onfocus="this.value=delay" onchange="delay=this.value"><br>
    <label for="">Current option:</label><input type="text" id="curr_opt" disabled>

<p></p>
<div id="options_div"></div>
<div id=""></div>
<h4>Chat samples</h4>
<p><input type="text" size="69" value="M1654771411142console_log_______JJJ"><button onclick="chat(this.parentElement.firstChild.value)">Send!</button></p>
<p><input type="text" size="69" value="M1654845867800alert_channel_____JJJ"><button onclick="chat(this.parentElement.firstChild.value)">Send!</button></p>
<p><input type="text" size="69" value="M1654851062982activation_channelM1654769809286clck______________"><button onclick="chat(this.parentElement.firstChild.value)">Send!</button></p>
<p><input type="text" size="69" value="M1654856034232activate_tuple_chaM1654855883536logJJActivTuple___"><button onclick="chat(this.parentElement.firstChild.value)">Send!</button></p>
<!-- <p><input type="text" size="69" value=""><button onclick="chat(this.parentElement.firstChild.value)">Send!</button></p> -->

<script>
// var gun = new Gun({localStorage:false, peers:["https://gun-manhattan.herokuapp.com/gun"]});
var gun = new Gun({localStorage:false, peers:["https://mg-gun.herokuapp.com/gun"]});
var gb = gun.get("M1654768040559gb_root___________").get("M1654768070090btn_clicked_______")
var gateway = gun.get("M1654768040559gb_root___________").get("M1654768070090btn_clicked_______")

function trigger_listener(){
    console.log(options_array[i])
}
var options_array=['yes','no','alphabet'];
var delay=700;
// function loop_through(){
var len = options_array.length;
var pause=false
let i=0;//current index
function next(){

if(!pause)
{
    // console.log(e)
    if(i<len-1)i++;
    else i=0;
    e=options_array[i]
    curr_opt.value=e;
setTimeout(() => {
    next()
}, delay);

}}
next()
function chat(m){
    some_c.channels_.general_channel(m);
}
function rid(){return ('M'+Date.now()+Math.random().toString().replace('.','J')+"BB00BB").substr(0,32);}
var last_id="";
gb.on(e=>{
if(e!=last_id){//not handled
// trigger_listener();
// some_c.neuron_instances_.M1654770252151gb_trigger________(e)
some_c.channels_.general_channel('M16548670393600J660129628935918B'+e)

}
})
var some_c={
    neuron_instances_:{
        M1654770252151gb_trigger________:function(msg){

        },

    },
    activation_tuples:{
        M1654855883536logJJActivTuple___:['M1654845867800alert_channel_____','M16548565288470J4551839671100357']
    },
    activations_:{
        M1654769809286clck______________:function(){
            trigger_listener();
        }
    },
    activation_contexts_:{
        M16548565288470J4551839671100357:'JJ'
    },

    option_sets:{},
    channels_:{
        general_channel:function(msg){
            // function parse(m){
                let m = msg;
                let first = m.slice(0,32);
                let rest = m.slice(32)
            //     return (first,rest)
            // }
            some_c.channels_[first](rest)
            
        },
        M1654771411142console_log_______:console.log,
        M1654845867800alert_channel_____:(m)=>alert(m),
        M1654847000234cond_action_______:function(m){
            let a = some_c.gctxt.M1654771196948current_action____;
            some_c.channels_[a](m);

        },
        M1654856034232activate_tuple_cha:function(tname){
            let a = some_c.activation_tuples[tname];
            some_c.channels_[tname[0]](some_c.activation_contexts_[tname[1]])
        },
        M1654850885830activation_channel:function(m){
            let first = m.slice(0,32);
            let rest = m.slice(32);
            let aname=(first,rest)
            some_c.channels_[first];
            //sends aname[1] to aname[0] channel;
            // some_c.activation_tuples
        },
        M1654851062982activation_channel:function(aname){
            some_c.activations_[aname]();
        },
        M16548670393600J660129628935918B:function(m){//this on gun msg
            let first = m.slice(0,32);
            let rest = m.slice(32);
            some_c.channels_.M1654771411142console_log_______(first,rest)
            some_c.activations_.M1654769809286clck______________();
        },

    },
    maps:{

    },
    gctxt:{
        M1654771196948current_action____:'M1654771411142console_log_______'
    }
}

</script> 
</body>
</html>